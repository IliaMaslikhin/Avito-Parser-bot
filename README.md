## Описание проекта

**Проект:** Автоматический парсер объявлений с Avito, интегрированный с Telegram-ботом.

**Особенности:**
- Бот отслеживает новые объявления на Avito по заданным ссылкам.
- При появлении нового объявления отправляет уведомление пользователю в Telegram.
- Позволяет добавлять и удалять ссылки для отслеживания через интерфейс бота.
- Использует Selenium для взаимодействия с веб-страницами Avito.

**Текущее состояние:** Проект был полностью работоспособным на момент создания (июль 2024), но сейчас его работа может быть ограничена или полностью утрачена из-за изменений в структуре сайта Avito или обновлений библиотек, используемых в проекте.

---

## Функционал

1. **Добавление ссылок для отслеживания:**
   - Пользователь может отправить ссылку на категорию или поиск на Avito, и бот начнет отслеживать появление новых объявлений.

2. **Уведомления о новых объявлениях:**
   - Когда появляется новое объявление, бот отправляет сообщение в Telegram с информацией:
     - Название объявления.
     - Цена.
     - Время публикации.
     - Ссылка на объявление.

3. **Управление ссылками:**
   - Пользователь может просматривать список отслеживаемых ссылок.
   - Удалять ненужные ссылки.

4. **Автоматическое обновление:**
   - Бот проверяет наличие новых объявлений каждую минуту.

---

## Технические детали

### **Используемые технологии и библиотеки:**
- **Python 3.x** — основной язык программирования.
- **Selenium** — для автоматизации работы с веб-страницами Avito.
- **Telebot (pyTelegramBotAPI)** — для создания Telegram-бота.
- **WebDriverManager** — для автоматической установки драйверов браузера.
- **Logging** — для логирования работы программы.
- **JSON** — для сохранения данных пользователей.

### **Зависимости:**
- `selenium`
- `webdriver-manager`
- `telebot` (или `pyTelegramBotAPI`)
- `json`

### **Структура проекта:**
- **`main.py`**: Главный файл, содержащий логику работы бота и парсера.
- **`user_data.txt`**: JSON-файл для хранения ссылок, добавленных пользователями.
- **Логи работы бота**: Сохраняются в консоль или файл через модуль `logging`.

---

## Как запустить проект

1. **Установите необходимые зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Создайте Telegram-бота:**
   - Перейдите в [@BotFather](https://t.me/BotFather) и создайте нового бота.
   - Получите токен для вашего бота.

3. **Настройте переменные:**
   - Откройте файл `main.py` и замените значение переменной `TOKEN` на ваш токен бота.

4. **Запустите скрипт:**
   ```bash
   python avitoparser.py
   ```

5. **Начните работу с ботом:**
   - Найдите вашего бота в Telegram и отправьте команду `/start`.
   - Используйте кнопки для управления ссылками.

---

## Ограничения и проблемы

1. **Работоспособность:**
   - На момент создания (июль 2024) проект работал корректно. Однако изменения в структуре HTML Avito или обновления библиотек могут привести к поломке функционала.
   - Например, если Avito изменит CSS-селекторы элементов страницы, парсер перестанет находить нужные данные.

2. **Анти-бот защита Avito:**
   - Avito активно борется с парсингом своих страниц. Это может привести к блокировке IP-адреса или необходимости решать капчу.

3. **Headless режим:**
   - Бот работает в headless режиме для экономии ресурсов, но это может вызвать проблемы с обходом капчи.

---

## Возможные доработки

1. **Обновление CSS-селекторов:**
   - Если парсер перестал работать, проверьте актуальные селекторы на сайте Avito и обновите их в коде.

2. **Обработка капчи:**
   - Добавить инструменты для автоматического решения капчи (например, через сервисы like 2Captcha).

3. **Логирование ошибок:**
   - Расширить систему логирования для более удобного анализа проблем.

4. **Масштабируемость:**
   - Добавить возможность одновременного отслеживания нескольких категорий или городов.

---

## Пример использования

1. Запустите бота командой `/start`.
2. Выберите действие "Добавить ссылку".
3. Отправьте ссылку на категорию или поиск на Avito (например, `https://www.avito.ru/moskva/avtomobili`).
4. Бот начнет отслеживать появление новых объявлений и отправлять уведомления.
